@page
@model LoginModel

@{
    ViewData["Title"] = "Login";
}

<div class="w-full mx-auto mt-16 p-6 font-base">

    <h1 class="font-title text-3xl mb-6 text-center">@ViewData["Title"]</h1>

    <form id="account" method="post" class="space-y-4">

        <!-- Validation summary -->
        <div asp-validation-summary="ModelOnly" 
             class="text-red-500 text-sm"
             role="alert"></div>

        <!-- Email -->
        <div>
            <label asp-for="Input.Email" class="block text-sm mb-1 font-medium">
                Email
            </label>

            <sl-input
                asp-for="Input.Email"
                type="email"
                autocomplete="username"
                required
                placeholder="name@example.com"
                class="w-full">
            </sl-input>

            <span asp-validation-for="Input.Email" class="text-red-500 text-sm"></span>
        </div>

        <!-- Password -->
        <div>
            <label asp-for="Input.Password" class="block text-sm mb-1 font-medium">
                Password
            </label>

            <sl-input
                asp-for="Input.Password"
                type="password"
                autocomplete="current-password"
                required
                placeholder="••••••••"
                password-toggle
                class="w-full">
            </sl-input>

            <span asp-validation-for="Input.Password" class="text-red-500 text-sm"></span>
        </div>

        <!-- Remember Me -->
        <label class="flex items-center gap-2 text-sm cursor-pointer">
            <input asp-for="Input.RememberMe" type="checkbox"
                   class="rounded-sm border border-[var(--sl-color-neutral-300)]">
            @Html.DisplayNameFor(m => m.Input.RememberMe)
        </label>

        <!-- Submit button -->
        <sl-button 
            id="login-submit"
            type="submit"
            variant="primary"
            class="w-full text-center">
            Log in
        </sl-button>

        <!-- Links -->
        <div class="text-sm space-y-1 text-center mt-4">
            <p>
                <a id="forgot-password" 
                   asp-page="./ForgotPassword" 
                   class="text-blue-400 hover:underline">
                    Forgot your password?
                </a>
            </p>
            <p>
                <a asp-page="./Register"
                   asp-route-returnUrl="@Model.ReturnUrl"
                   class="text-blue-400 hover:underline">
                    Register as a new user
                </a>
            </p>
            <p>
                <a id="resend-confirmation"
                   asp-page="./ResendEmailConfirmation"
                   class="text-blue-400 hover:underline">
                    Resend email confirmation
                </a>
            </p>
        </div>
    </form>

    <!-- External providers -->
    @if ((Model.ExternalLogins?.Count ?? 0) > 0)
    {
        <div class="mt-8 pt-6 border-t border-[var(--sl-color-neutral-300)]">

            <h3 class="font-title text-xl mb-4 text-center">Use another service</h3>

            <form id="external-account"
                  asp-page="./ExternalLogin"
                  asp-route-returnUrl="@Model.ReturnUrl"
                  method="post"
                  class="flex flex-col gap-2">

                @foreach (var provider in Model.ExternalLogins!)
                {
                    <sl-button type="submit"
                               name="provider"
                               value="@provider.Name"
                               variant="primary"
                               class="w-full">
                        Log in with @provider.DisplayName
                    </sl-button>
                }
            </form>
        </div>
    }
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
